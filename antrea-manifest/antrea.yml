apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: antreaagentinfos.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: AntreaAgentInfo
    plural: antreaagentinfos
    shortNames:
    - aai
    singular: antreaagentinfo
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: Health status of this Agent
      jsonPath: .agentConditions[?(@.type=='AgentHealthy')].status
      name: Healthy
      type: string
    - description: Last time the Healthy Condition was updated
      jsonPath: .agentConditions[?(@.type=='AgentHealthy')].lastHeartbeatTime
      name: Last Heartbeat
      type: date
    - description: Version of this Agent
      jsonPath: .version
      name: Version
      priority: 1
      type: string
    - description: Node on which this Agent is running
      jsonPath: .nodeRef.name
      name: Node
      priority: 1
      type: string
    - description: Number of local Pods managed by this Agent
      jsonPath: .localPodNum
      name: Num Pods
      priority: 2
      type: integer
    - description: Subnets used by this Agent for Pod IPAM
      jsonPath: .nodeSubnets
      name: Subnets
      priority: 2
      type: string
    name: v1beta1
    schema:
      openAPIV3Schema:
        type: object
        x-kubernetes-preserve-unknown-fields: true
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: antreacontrollerinfos.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: AntreaControllerInfo
    plural: antreacontrollerinfos
    shortNames:
    - aci
    singular: antreacontrollerinfo
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: Health status of the Controller
      jsonPath: .controllerConditions[?(@.type=='ControllerHealthy')].status
      name: Healthy
      type: string
    - description: Last time the Healthy Condition was updated
      jsonPath: .controllerConditions[?(@.type=='ControllerHealthy')].lastHeartbeatTime
      name: Last Heartbeat
      type: date
    - description: Version of the Controller
      jsonPath: .version
      name: Version
      priority: 1
      type: string
    - description: Number of Agents connected to the Controller
      jsonPath: .connectedAgentNum
      name: Connected Agents
      priority: 1
      type: integer
    - description: Node on which the Controller is running
      jsonPath: .nodeRef.name
      name: Node
      priority: 1
      type: string
    - description: Number of Network Policies computed by Controller
      jsonPath: .networkPolicyControllerInfo.networkPolicyNum
      name: Num Network Policies
      priority: 2
      type: integer
    name: v1beta1
    schema:
      openAPIV3Schema:
        type: object
        x-kubernetes-preserve-unknown-fields: true
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: clustergroups.crd.antrea.io
spec:
  conversion:
    strategy: Webhook
    webhook:
      clientConfig:
        service:
          name: antrea
          namespace: kube-system
          path: /convert/clustergroup
      conversionReviewVersions:
      - v1
      - v1beta1
  group: crd.antrea.io
  names:
    kind: ClusterGroup
    plural: clustergroups
    shortNames:
    - cg
    singular: clustergroup
  scope: Cluster
  versions:
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              childGroups:
                items:
                  type: string
                type: array
              externalEntitySelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              ipBlock:
                properties:
                  cidr:
                    format: cidr
                    type: string
                type: object
              ipBlocks:
                items:
                  properties:
                    cidr:
                      format: cidr
                      type: string
                  type: object
                type: array
              namespaceSelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              podSelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              serviceReference:
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
            type: object
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: false
  - name: v1alpha3
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              childGroups:
                items:
                  type: string
                type: array
              externalEntitySelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              ipBlocks:
                items:
                  properties:
                    cidr:
                      format: cidr
                      type: string
                  type: object
                type: array
              namespaceSelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              podSelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              serviceReference:
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
            type: object
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: clusternetworkpolicies.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: ClusterNetworkPolicy
    plural: clusternetworkpolicies
    shortNames:
    - acnp
    singular: clusternetworkpolicy
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: The Tier to which this ClusterNetworkPolicy belongs to.
      jsonPath: .spec.tier
      name: Tier
      type: string
    - description: The Priority of this ClusterNetworkPolicy relative to other policies.
      format: float
      jsonPath: .spec.priority
      name: Priority
      type: number
    - description: The total number of Nodes that should realize the NetworkPolicy.
      format: int32
      jsonPath: .status.desiredNodesRealized
      name: Desired Nodes
      type: number
    - description: The number of Nodes that have realized the NetworkPolicy.
      format: int32
      jsonPath: .status.currentNodesRealized
      name: Current Nodes
      type: number
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              appliedTo:
                items:
                  properties:
                    group:
                      type: string
                    namespaceSelector:
                      properties:
                        matchExpressions:
                          items:
                            properties:
                              key:
                                type: string
                              operator:
                                enum:
                                - In
                                - NotIn
                                - Exists
                                - DoesNotExist
                                type: string
                              values:
                                items:
                                  pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                  type: string
                                type: array
                            type: object
                          type: array
                        matchLabels:
                          x-kubernetes-preserve-unknown-fields: true
                      type: object
                    podSelector:
                      properties:
                        matchExpressions:
                          items:
                            properties:
                              key:
                                type: string
                              operator:
                                enum:
                                - In
                                - NotIn
                                - Exists
                                - DoesNotExist
                                type: string
                              values:
                                items:
                                  pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                  type: string
                                type: array
                            type: object
                          type: array
                        matchLabels:
                          x-kubernetes-preserve-unknown-fields: true
                      type: object
                    service:
                      properties:
                        name:
                          type: string
                        namespace:
                          type: string
                      required:
                      - name
                      - namespace
                      type: object
                    serviceAccount:
                      properties:
                        name:
                          type: string
                        namespace:
                          type: string
                      required:
                      - name
                      - namespace
                      type: object
                  type: object
                type: array
              egress:
                items:
                  properties:
                    action:
                      enum:
                      - Allow
                      - Drop
                      - Reject
                      - Pass
                      type: string
                    appliedTo:
                      items:
                        properties:
                          group:
                            type: string
                          namespaceSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          podSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          serviceAccount:
                            properties:
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            - namespace
                            type: object
                        type: object
                      type: array
                    enableLogging:
                      type: boolean
                    l7Protocols:
                      items:
                        oneOf:
                        - required:
                          - http
                        properties:
                          http:
                            properties:
                              host:
                                type: string
                              method:
                                enum:
                                - GET
                                - POST
                                - PUT
                                - HEAD
                                - DELETE
                                - TRACE
                                - OPTIONS
                                - CONNECT
                                - PATCH
                                type: string
                              path:
                                type: string
                            type: object
                        type: object
                      type: array
                    name:
                      type: string
                    ports:
                      items:
                        properties:
                          endPort:
                            type: integer
                          port:
                            x-kubernetes-int-or-string: true
                          protocol:
                            enum:
                            - TCP
                            - UDP
                            - SCTP
                            type: string
                        type: object
                      type: array
                    protocols:
                      items:
                        oneOf:
                        - required:
                          - icmp
                        - required:
                          - igmp
                        properties:
                          icmp:
                            properties:
                              icmpCode:
                                maximum: 255
                                minimum: 0
                                type: integer
                              icmpType:
                                maximum: 255
                                minimum: 0
                                type: integer
                            type: object
                          igmp:
                            properties:
                              groupAddress:
                                oneOf:
                                - format: ipv4
                                - format: ipv6
                                type: string
                              igmpType:
                                enum:
                                - 18
                                - 22
                                - 34
                                type: integer
                            type: object
                        type: object
                      type: array
                    to:
                      items:
                        properties:
                          fqdn:
                            type: string
                          group:
                            type: string
                          ipBlock:
                            properties:
                              cidr:
                                format: cidr
                                type: string
                            type: object
                          namespaceSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          namespaces:
                            properties:
                              match:
                                enum:
                                - Self
                                type: string
                            type: object
                          nodeSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          podSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          serviceAccount:
                            properties:
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            - namespace
                            type: object
                        type: object
                      type: array
                    toServices:
                      items:
                        properties:
                          name:
                            type: string
                          namespace:
                            type: string
                          scope:
                            enum:
                            - Cluster
                            - ClusterSet
                            type: string
                        required:
                        - name
                        - namespace
                        type: object
                      type: array
                  required:
                  - action
                  type: object
                type: array
              ingress:
                items:
                  properties:
                    action:
                      enum:
                      - Allow
                      - Drop
                      - Reject
                      - Pass
                      type: string
                    appliedTo:
                      items:
                        properties:
                          group:
                            type: string
                          namespaceSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          podSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          service:
                            properties:
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            - namespace
                            type: object
                          serviceAccount:
                            properties:
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            - namespace
                            type: object
                        type: object
                      type: array
                    enableLogging:
                      type: boolean
                    from:
                      items:
                        properties:
                          group:
                            type: string
                          ipBlock:
                            properties:
                              cidr:
                                format: cidr
                                type: string
                            type: object
                          namespaceSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          namespaces:
                            properties:
                              match:
                                enum:
                                - Self
                                type: string
                            type: object
                          nodeSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          podSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          scope:
                            enum:
                            - Cluster
                            - ClusterSet
                            type: string
                          serviceAccount:
                            properties:
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            - namespace
                            type: object
                        type: object
                      type: array
                    l7Protocols:
                      items:
                        oneOf:
                        - required:
                          - http
                        properties:
                          http:
                            properties:
                              host:
                                type: string
                              method:
                                enum:
                                - GET
                                - POST
                                - PUT
                                - HEAD
                                - DELETE
                                - TRACE
                                - OPTIONS
                                - CONNECT
                                - PATCH
                                type: string
                              path:
                                type: string
                            type: object
                        type: object
                      type: array
                    name:
                      type: string
                    ports:
                      items:
                        properties:
                          endPort:
                            type: integer
                          port:
                            x-kubernetes-int-or-string: true
                          protocol:
                            enum:
                            - TCP
                            - UDP
                            - SCTP
                            type: string
                        type: object
                      type: array
                    protocols:
                      items:
                        oneOf:
                        - required:
                          - icmp
                        - required:
                          - igmp
                        properties:
                          icmp:
                            properties:
                              icmpCode:
                                maximum: 255
                                minimum: 0
                                type: integer
                              icmpType:
                                maximum: 255
                                minimum: 0
                                type: integer
                            type: object
                          igmp:
                            properties:
                              groupAddress:
                                oneOf:
                                - format: ipv4
                                - format: ipv6
                                type: string
                              igmpType:
                                enum:
                                - 17
                                type: integer
                            type: object
                        type: object
                      type: array
                  required:
                  - action
                  type: object
                type: array
              priority:
                format: float
                maximum: 10000
                minimum: 1
                type: number
              tier:
                type: string
            required:
            - priority
            type: object
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
              currentNodesRealized:
                type: integer
              desiredNodesRealized:
                type: integer
              observedGeneration:
                type: integer
              phase:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: egresses.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: Egress
    plural: egresses
    shortNames:
    - eg
    singular: egress
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: Specifies the SNAT IP address for the selected workloads.
      jsonPath: .spec.egressIP
      name: EgressIP
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    - description: The Owner Node of egress IP
      jsonPath: .status.egressNode
      name: Node
      type: string
    name: v1alpha2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            anyOf:
            - required:
              - egressIP
            - required:
              - externalIPPool
            properties:
              appliedTo:
                properties:
                  namespaceSelector:
                    properties:
                      matchExpressions:
                        items:
                          properties:
                            key:
                              type: string
                            operator:
                              enum:
                              - In
                              - NotIn
                              - Exists
                              - DoesNotExist
                              type: string
                            values:
                              items:
                                pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                type: string
                              type: array
                          type: object
                        type: array
                      matchLabels:
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                  podSelector:
                    properties:
                      matchExpressions:
                        items:
                          properties:
                            key:
                              type: string
                            operator:
                              enum:
                              - In
                              - NotIn
                              - Exists
                              - DoesNotExist
                              type: string
                            values:
                              items:
                                pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                type: string
                              type: array
                          type: object
                        type: array
                      matchLabels:
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                type: object
              egressIP:
                oneOf:
                - format: ipv4
                - format: ipv6
                type: string
              externalIPPool:
                type: string
            required:
            - appliedTo
            type: object
          status:
            properties:
              egressNode:
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: externalentities.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: ExternalEntity
    plural: externalentities
    shortNames:
    - ee
    singular: externalentity
  scope: Namespaced
  versions:
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              endpoints:
                items:
                  properties:
                    ip:
                      oneOf:
                      - format: ipv4
                      - format: ipv6
                      type: string
                    name:
                      type: string
                  type: object
                type: array
              externalNode:
                type: string
              ports:
                items:
                  properties:
                    name:
                      type: string
                    port:
                      x-kubernetes-int-or-string: true
                    protocol:
                      enum:
                      - TCP
                      - UDP
                      - SCTP
                      type: string
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        type: object
    served: false
    storage: false
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: externalippools.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: ExternalIPPool
    plural: externalippools
    shortNames:
    - eip
    singular: externalippool
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: The number of total IPs
      jsonPath: .status.usage.total
      name: Total
      type: integer
    - description: The number of allocated IPs
      jsonPath: .status.usage.used
      name: Used
      type: integer
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              ipRanges:
                items:
                  oneOf:
                  - required:
                    - cidr
                  - required:
                    - start
                    - end
                  properties:
                    cidr:
                      format: cidr
                      type: string
                    end:
                      oneOf:
                      - format: ipv4
                      - format: ipv6
                      type: string
                    start:
                      oneOf:
                      - format: ipv4
                      - format: ipv6
                      type: string
                  type: object
                type: array
              nodeSelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
            required:
            - ipRanges
            - nodeSelector
            type: object
          status:
            properties:
              usage:
                properties:
                  total:
                    type: integer
                  used:
                    type: integer
                type: object
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: externalnodes.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: ExternalNode
    plural: externalnodes
    shortNames:
    - en
    singular: externalnode
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              interfaces:
                items:
                  properties:
                    ips:
                      items:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                      minItems: 1
                      type: array
                    name:
                      type: string
                  type: object
                maxItems: 1
                minItems: 1
                required:
                - ips
                type: array
            required:
            - interfaces
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: groups.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: Group
    plural: groups
    shortNames:
    - grp
    singular: group
  scope: Namespaced
  versions:
  - name: v1alpha3
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              childGroups:
                items:
                  type: string
                type: array
              externalEntitySelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              ipBlocks:
                items:
                  properties:
                    cidr:
                      format: cidr
                      type: string
                  type: object
                type: array
              namespaceSelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              podSelector:
                properties:
                  matchExpressions:
                    items:
                      properties:
                        key:
                          type: string
                        operator:
                          enum:
                          - In
                          - NotIn
                          - Exists
                          - DoesNotExist
                          type: string
                        values:
                          items:
                            type: string
                          type: array
                      type: object
                    type: array
                  matchLabels:
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              serviceReference:
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                type: object
            type: object
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: ippools.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: IPPool
    plural: ippools
    shortNames:
    - ipp
    singular: ippool
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: The number of total IPs
      jsonPath: .status.usage.total
      name: Total
      type: integer
    - description: The number of allocated IPs
      jsonPath: .status.usage.used
      name: Used
      type: integer
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              ipRanges:
                items:
                  oneOf:
                  - required:
                    - cidr
                    - gateway
                    - prefixLength
                  - required:
                    - start
                    - end
                    - gateway
                    - prefixLength
                  properties:
                    cidr:
                      format: cidr
                      type: string
                    end:
                      oneOf:
                      - format: ipv4
                      - format: ipv6
                      type: string
                    gateway:
                      oneOf:
                      - format: ipv4
                      - format: ipv6
                      type: string
                    prefixLength:
                      maximum: 128
                      minimum: 1
                      type: integer
                    start:
                      oneOf:
                      - format: ipv4
                      - format: ipv6
                      type: string
                    vlan:
                      maximum: 4094
                      minimum: 0
                      type: integer
                  type: object
                type: array
              ipVersion:
                enum:
                - 4
                - 6
                type: integer
            required:
            - ipVersion
            - ipRanges
            type: object
          status:
            properties:
              ipAddresses:
                items:
                  properties:
                    ipAddress:
                      type: string
                    owner:
                      properties:
                        pod:
                          properties:
                            containerID:
                              type: string
                            ifName:
                              type: string
                            name:
                              type: string
                            namespace:
                              type: string
                          type: object
                        statefulSet:
                          properties:
                            index:
                              type: integer
                            name:
                              type: string
                            namespace:
                              type: string
                          type: object
                      type: object
                    phase:
                      type: string
                  type: object
                type: array
              usage:
                properties:
                  total:
                    type: integer
                  used:
                    type: integer
                type: object
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: networkpolicies.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: NetworkPolicy
    plural: networkpolicies
    shortNames:
    - anp
    singular: networkpolicy
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: The Tier to which this Antrea NetworkPolicy belongs to.
      jsonPath: .spec.tier
      name: Tier
      type: string
    - description: The Priority of this Antrea NetworkPolicy relative to other policies.
      format: float
      jsonPath: .spec.priority
      name: Priority
      type: number
    - description: The total number of Nodes that should realize the NetworkPolicy.
      format: int32
      jsonPath: .status.desiredNodesRealized
      name: Desired Nodes
      type: number
    - description: The number of Nodes that have realized the NetworkPolicy.
      format: int32
      jsonPath: .status.currentNodesRealized
      name: Current Nodes
      type: number
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              appliedTo:
                items:
                  properties:
                    externalEntitySelector:
                      properties:
                        matchExpressions:
                          items:
                            properties:
                              key:
                                type: string
                              operator:
                                enum:
                                - In
                                - NotIn
                                - Exists
                                - DoesNotExist
                                type: string
                              values:
                                items:
                                  pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                  type: string
                                type: array
                            type: object
                          type: array
                        matchLabels:
                          x-kubernetes-preserve-unknown-fields: true
                      type: object
                    group:
                      type: string
                    podSelector:
                      properties:
                        matchExpressions:
                          items:
                            properties:
                              key:
                                type: string
                              operator:
                                enum:
                                - In
                                - NotIn
                                - Exists
                                - DoesNotExist
                                type: string
                              values:
                                items:
                                  pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                  type: string
                                type: array
                            type: object
                          type: array
                        matchLabels:
                          x-kubernetes-preserve-unknown-fields: true
                      type: object
                  type: object
                type: array
              egress:
                items:
                  properties:
                    action:
                      enum:
                      - Allow
                      - Drop
                      - Reject
                      - Pass
                      type: string
                    appliedTo:
                      items:
                        properties:
                          group:
                            type: string
                          podSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                        type: object
                      type: array
                    enableLogging:
                      type: boolean
                    l7Protocols:
                      items:
                        oneOf:
                        - required:
                          - http
                        properties:
                          http:
                            properties:
                              host:
                                type: string
                              method:
                                enum:
                                - GET
                                - POST
                                - PUT
                                - HEAD
                                - DELETE
                                - TRACE
                                - OPTIONS
                                - CONNECT
                                - PATCH
                                type: string
                              path:
                                type: string
                            type: object
                        type: object
                      type: array
                    name:
                      type: string
                    ports:
                      items:
                        properties:
                          endPort:
                            type: integer
                          port:
                            x-kubernetes-int-or-string: true
                          protocol:
                            enum:
                            - TCP
                            - UDP
                            - SCTP
                            type: string
                        type: object
                      type: array
                    protocols:
                      items:
                        oneOf:
                        - required:
                          - icmp
                        - required:
                          - igmp
                        properties:
                          icmp:
                            properties:
                              icmpCode:
                                maximum: 255
                                minimum: 0
                                type: integer
                              icmpType:
                                maximum: 255
                                minimum: 0
                                type: integer
                            type: object
                          igmp:
                            properties:
                              groupAddress:
                                oneOf:
                                - format: ipv4
                                - format: ipv6
                                type: string
                              igmpType:
                                enum:
                                - 18
                                - 22
                                - 34
                                type: integer
                            type: object
                        type: object
                      type: array
                    to:
                      items:
                        properties:
                          externalEntitySelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          fqdn:
                            type: string
                          group:
                            type: string
                          ipBlock:
                            properties:
                              cidr:
                                format: cidr
                                type: string
                            type: object
                          namespaceSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          nodeSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          podSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                        type: object
                      type: array
                    toServices:
                      items:
                        properties:
                          name:
                            type: string
                          namespace:
                            type: string
                          scope:
                            type: string
                        required:
                        - name
                        type: object
                      type: array
                  required:
                  - action
                  type: object
                type: array
              ingress:
                items:
                  properties:
                    action:
                      enum:
                      - Allow
                      - Drop
                      - Reject
                      - Pass
                      type: string
                    appliedTo:
                      items:
                        properties:
                          group:
                            type: string
                          podSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                        type: object
                      type: array
                    enableLogging:
                      type: boolean
                    from:
                      items:
                        properties:
                          externalEntitySelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          group:
                            type: string
                          ipBlock:
                            properties:
                              cidr:
                                format: cidr
                                type: string
                            type: object
                          namespaceSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          nodeSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          podSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      enum:
                                      - In
                                      - NotIn
                                      - Exists
                                      - DoesNotExist
                                      type: string
                                    values:
                                      items:
                                        pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                        type: string
                                      type: array
                                  type: object
                                type: array
                              matchLabels:
                                x-kubernetes-preserve-unknown-fields: true
                            type: object
                          scope:
                            enum:
                            - Cluster
                            - ClusterSet
                            type: string
                        type: object
                      type: array
                    l7Protocols:
                      items:
                        oneOf:
                        - required:
                          - http
                        properties:
                          http:
                            properties:
                              host:
                                type: string
                              method:
                                enum:
                                - GET
                                - POST
                                - PUT
                                - HEAD
                                - DELETE
                                - TRACE
                                - OPTIONS
                                - CONNECT
                                - PATCH
                                type: string
                              path:
                                type: string
                            type: object
                        type: object
                      type: array
                    name:
                      type: string
                    ports:
                      items:
                        properties:
                          endPort:
                            type: integer
                          port:
                            x-kubernetes-int-or-string: true
                          protocol:
                            enum:
                            - TCP
                            - UDP
                            - SCTP
                            type: string
                        type: object
                      type: array
                    protocols:
                      items:
                        oneOf:
                        - required:
                          - icmp
                        - required:
                          - igmp
                        properties:
                          icmp:
                            properties:
                              icmpCode:
                                maximum: 255
                                minimum: 0
                                type: integer
                              icmpType:
                                maximum: 255
                                minimum: 0
                                type: integer
                            type: object
                          igmp:
                            properties:
                              groupAddress:
                                oneOf:
                                - format: ipv4
                                - format: ipv6
                                type: string
                              igmpType:
                                enum:
                                - 17
                                type: integer
                            type: object
                        type: object
                      type: array
                  required:
                  - action
                  type: object
                type: array
              priority:
                format: float
                maximum: 10000
                minimum: 1
                type: number
              tier:
                type: string
            required:
            - priority
            type: object
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
              currentNodesRealized:
                type: integer
              desiredNodesRealized:
                type: integer
              observedGeneration:
                type: integer
              phase:
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: supportbundlecollections.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: SupportBundleCollection
    plural: supportbundlecollections
    shortNames:
    - sbc
    singular: supportbundlecollection
  scope: Cluster
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            anyOf:
            - required:
              - nodes
            - required:
              - externalNodes
            properties:
              authentication:
                properties:
                  authSecret:
                    properties:
                      name:
                        type: string
                      namespace:
                        type: string
                    type: object
                  authType:
                    enum:
                    - BearerToken
                    - APIKey
                    - BasicAuthentication
                    type: string
                type: object
              expirationMinutes:
                default: 60
                type: integer
              externalNodes:
                properties:
                  namespace:
                    type: string
                  nodeNames:
                    items:
                      type: string
                    type: array
                  nodeSelector:
                    properties:
                      matchExpressions:
                        items:
                          properties:
                            key:
                              type: string
                            operator:
                              enum:
                              - In
                              - NotIn
                              - Exists
                              - DoesNotExist
                              type: string
                            values:
                              items:
                                pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                type: string
                              type: array
                          type: object
                        type: array
                      matchLabels:
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                required:
                - namespace
                type: object
              fileServer:
                properties:
                  url:
                    type: string
                type: object
              nodes:
                properties:
                  nodeNames:
                    items:
                      type: string
                    type: array
                  nodeSelector:
                    properties:
                      matchExpressions:
                        items:
                          properties:
                            key:
                              type: string
                            operator:
                              enum:
                              - In
                              - NotIn
                              - Exists
                              - DoesNotExist
                              type: string
                            values:
                              items:
                                pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                type: string
                              type: array
                          type: object
                        type: array
                      matchLabels:
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                type: object
              sinceTime:
                format: duration
                type: string
            required:
            - fileServer
            - authentication
            type: object
          status:
            properties:
              collectedNodes:
                type: integer
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  type: object
                type: array
              desiredNodes:
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: tiers.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: Tier
    plural: tiers
    shortNames:
    - tr
    singular: tier
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: The Priority of this Tier relative to other Tiers.
      jsonPath: .spec.priority
      name: Priority
      type: integer
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              description:
                type: string
              priority:
                maximum: 255
                minimum: 0
                type: integer
            required:
            - priority
            type: object
        type: object
    served: true
    storage: true
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
    app: antrea
  name: traceflows.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: Traceflow
    plural: traceflows
    shortNames:
    - tf
    singular: traceflow
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: The phase of the Traceflow.
      jsonPath: .status.phase
      name: Phase
      type: string
    - description: The name of the source Pod.
      jsonPath: .spec.source.pod
      name: Source-Pod
      priority: 10
      type: string
    - description: The name of the destination Pod.
      jsonPath: .spec.destination.pod
      name: Destination-Pod
      priority: 10
      type: string
    - description: The IP address of the destination.
      jsonPath: .spec.destination.ip
      name: Destination-IP
      priority: 10
      type: string
    - description: Trace live traffic.
      jsonPath: .spec.liveTraffic
      name: Live-Traffic
      priority: 10
      type: boolean
    - description: Capture only the dropped packet.
      jsonPath: .spec.droppedOnly
      name: Dropped-Only
      priority: 10
      type: boolean
    - description: Timeout in seconds.
      jsonPath: .spec.timeout
      name: Timeout
      priority: 10
      type: integer
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              destination:
                properties:
                  ip:
                    oneOf:
                    - format: ipv4
                    - format: ipv6
                    type: string
                  namespace:
                    type: string
                  pod:
                    type: string
                  service:
                    type: string
                type: object
              droppedOnly:
                type: boolean
              liveTraffic:
                type: boolean
              packet:
                properties:
                  ipHeader:
                    properties:
                      flags:
                        type: integer
                      protocol:
                        type: integer
                      srcIP:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                      ttl:
                        type: integer
                    type: object
                  ipv6Header:
                    properties:
                      hopLimit:
                        type: integer
                      nextHeader:
                        type: integer
                      srcIP:
                        format: ipv6
                        type: string
                    type: object
                  transportHeader:
                    properties:
                      icmp:
                        properties:
                          id:
                            type: integer
                          sequence:
                            type: integer
                        type: object
                      tcp:
                        properties:
                          dstPort:
                            type: integer
                          flags:
                            type: integer
                          srcPort:
                            type: integer
                        type: object
                      udp:
                        properties:
                          dstPort:
                            type: integer
                          srcPort:
                            type: integer
                        type: object
                    type: object
                type: object
              source:
                properties:
                  ip:
                    oneOf:
                    - format: ipv4
                    - format: ipv6
                    type: string
                  namespace:
                    type: string
                  pod:
                    type: string
                type: object
              timeout:
                type: integer
            type: object
          status:
            properties:
              capturedPacket:
                properties:
                  dstIP:
                    type: string
                  ipHeader:
                    properties:
                      flags:
                        type: integer
                      protocol:
                        type: integer
                      ttl:
                        type: integer
                    type: object
                  ipv6Header:
                    properties:
                      hopLimit:
                        type: integer
                      nextHeader:
                        type: integer
                    type: object
                  length:
                    type: integer
                  srcIP:
                    type: string
                  transportHeader:
                    properties:
                      icmp:
                        properties:
                          id:
                            type: integer
                          sequence:
                            type: integer
                        type: object
                      tcp:
                        properties:
                          dstPort:
                            type: integer
                          flags:
                            type: integer
                          srcPort:
                            type: integer
                        type: object
                      udp:
                        properties:
                          dstPort:
                            type: integer
                          srcPort:
                            type: integer
                        type: object
                    type: object
                type: object
              dataplaneTag:
                type: integer
              phase:
                type: string
              reason:
                type: string
              results:
                items:
                  properties:
                    node:
                      type: string
                    observations:
                      items:
                        properties:
                          action:
                            type: string
                          component:
                            type: string
                          componentInfo:
                            type: string
                          dstMAC:
                            type: string
                          egress:
                            type: string
                          egressIP:
                            type: string
                          networkPolicy:
                            type: string
                          pod:
                            type: string
                          translatedDstIP:
                            type: string
                          translatedSrcIP:
                            type: string
                          ttl:
                            type: integer
                          tunnelDstIP:
                            type: string
                        type: object
                      type: array
                    role:
                      type: string
                    timestamp:
                      type: integer
                  type: object
                type: array
              startTime:
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: trafficcontrols.crd.antrea.io
spec:
  group: crd.antrea.io
  names:
    kind: TrafficControl
    plural: trafficcontrols
    shortNames:
    - tc
    singular: trafficcontrol
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - description: Specifies the direction of traffic that should be matched.
      jsonPath: .spec.direction
      name: Direction
      type: string
    - description: Specifies the action that should be taken for the traffic.
      jsonPath: .spec.action
      name: Action
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha2
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              action:
                enum:
                - Mirror
                - Redirect
                type: string
              appliedTo:
                properties:
                  namespaceSelector:
                    properties:
                      matchExpressions:
                        items:
                          properties:
                            key:
                              type: string
                            operator:
                              enum:
                              - In
                              - NotIn
                              - Exists
                              - DoesNotExist
                              type: string
                            values:
                              items:
                                pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                type: string
                              type: array
                          type: object
                        type: array
                      matchLabels:
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                  podSelector:
                    properties:
                      matchExpressions:
                        items:
                          properties:
                            key:
                              type: string
                            operator:
                              enum:
                              - In
                              - NotIn
                              - Exists
                              - DoesNotExist
                              type: string
                            values:
                              items:
                                pattern: ^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$
                                type: string
                              type: array
                          type: object
                        type: array
                      matchLabels:
                        x-kubernetes-preserve-unknown-fields: true
                    type: object
                type: object
              direction:
                enum:
                - Ingress
                - Egress
                - Both
                type: string
              returnPort:
                oneOf:
                - required:
                  - ovsInternal
                - required:
                  - device
                - required:
                  - geneve
                - required:
                  - vxlan
                - required:
                  - gre
                properties:
                  device:
                    properties:
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  geneve:
                    properties:
                      destinationPort:
                        maximum: 65535
                        minimum: 1
                        type: integer
                      remoteIP:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                      vni:
                        maximum: 16777215
                        minimum: 0
                        type: integer
                    required:
                    - remoteIP
                    type: object
                  gre:
                    properties:
                      key:
                        maximum: 4294967295
                        minimum: 0
                        type: integer
                      remoteIP:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                    required:
                    - remoteIP
                    type: object
                  ovsInternal:
                    properties:
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  vxlan:
                    properties:
                      destinationPort:
                        maximum: 65535
                        minimum: 1
                        type: integer
                      remoteIP:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                      vni:
                        maximum: 16777215
                        minimum: 0
                        type: integer
                    required:
                    - remoteIP
                    type: object
                type: object
              targetPort:
                oneOf:
                - required:
                  - ovsInternal
                - required:
                  - device
                - required:
                  - geneve
                - required:
                  - vxlan
                - required:
                  - gre
                - required:
                  - erspan
                properties:
                  device:
                    properties:
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  erspan:
                    properties:
                      dir:
                        enum:
                        - 0
                        - 1
                        type: integer
                      hardwareID:
                        type: integer
                      index:
                        type: integer
                      remoteIP:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                      sessionID:
                        maximum: 1023
                        minimum: 0
                        type: integer
                      version:
                        enum:
                        - 1
                        - 2
                        type: integer
                    required:
                    - remoteIP
                    - version
                    type: object
                  geneve:
                    properties:
                      destinationPort:
                        maximum: 65535
                        minimum: 1
                        type: integer
                      remoteIP:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                      vni:
                        maximum: 16777215
                        minimum: 0
                        type: integer
                    required:
                    - remoteIP
                    type: object
                  gre:
                    properties:
                      key:
                        maximum: 4294967295
                        minimum: 0
                        type: integer
                      remoteIP:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                    required:
                    - remoteIP
                    type: object
                  ovsInternal:
                    properties:
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  vxlan:
                    properties:
                      destinationPort:
                        maximum: 65535
                        minimum: 1
                        type: integer
                      remoteIP:
                        oneOf:
                        - format: ipv4
                        - format: ipv6
                        type: string
                      vni:
                        maximum: 16777215
                        minimum: 0
                        type: integer
                    required:
                    - remoteIP
                    type: object
                type: object
            required:
            - appliedTo
            - direction
            - action
            - targetPort
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: antrea
  name: antctl
  namespace: kube-system
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: antrea
  name: antrea-agent
  namespace: kube-system
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: antrea
  name: antrea-controller
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
  name: aggregate-antrea-clustergroups-edit
rules:
- apiGroups:
  - crd.antrea.io
  resources:
  - clustergroups
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  name: aggregate-antrea-clustergroups-view
rules:
- apiGroups:
  - crd.antrea.io
  resources:
  - clustergroups
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
  name: aggregate-antrea-policies-edit
rules:
- apiGroups:
  - crd.antrea.io
  resources:
  - clusternetworkpolicies
  - networkpolicies
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  name: aggregate-antrea-policies-view
rules:
- apiGroups:
  - crd.antrea.io
  resources:
  - clusternetworkpolicies
  - networkpolicies
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
  name: aggregate-traceflows-edit
rules:
- apiGroups:
  - crd.antrea.io
  resources:
  - traceflows
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  name: aggregate-traceflows-view
rules:
- apiGroups:
  - crd.antrea.io
  resources:
  - traceflows
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
  name: antctl
rules:
- apiGroups:
  - controlplane.antrea.io
  resources:
  - networkpolicies
  - appliedtogroups
  - addressgroups
  verbs:
  - get
  - list
- apiGroups:
  - stats.antrea.io
  resources:
  - networkpolicystats
  - antreaclusternetworkpolicystats
  - antreanetworkpolicystats
  verbs:
  - get
  - list
- apiGroups:
  - system.antrea.io
  resources:
  - controllerinfos
  - agentinfos
  verbs:
  - get
- apiGroups:
  - system.antrea.io
  resources:
  - supportbundles
  verbs:
  - get
  - post
- apiGroups:
  - system.antrea.io
  resources:
  - supportbundles/download
  verbs:
  - get
- nonResourceURLs:
  - /agentinfo
  - /addressgroups
  - /appliedtogroups
  - /loglevel
  - /networkpolicies
  - /ovsflows
  - /ovstracing
  - /podinterfaces
  - /featuregates
  - /serviceexternalip
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
  name: antrea-agent
rules:
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - ""
  resources:
  - nodes/status
  verbs:
  - patch
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - ""
  resources:
  - pods/status
  verbs:
  - patch
- apiGroups:
  - ""
  resources:
  - endpoints
  - services
  - namespaces
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - crd.antrea.io
  resources:
  - antreaagentinfos
  verbs:
  - get
  - update
- apiGroups:
  - controlplane.antrea.io
  resources:
  - networkpolicies
  - appliedtogroups
  - addressgroups
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - controlplane.antrea.io
  resources:
  - egressgroups
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - controlplane.antrea.io
  resources:
  - nodestatssummaries
  verbs:
  - create
- apiGroups:
  - controlplane.antrea.io
  resources:
  - networkpolicies/status
  verbs:
  - create
  - get
- apiGroups:
  - controlplane.antrea.io
  resources:
  - supportbundlecollections
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - controlplane.antrea.io
  resources:
  - supportbundlecollections/status
  verbs:
  - create
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
- apiGroups:
  - ""
  resourceNames:
  - extension-apiserver-authentication
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resourceNames:
  - antrea-ca
  resources:
  - configmaps
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - crd.antrea.io
  resources:
  - traceflows
  - traceflows/status
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - crd.antrea.io
  resources:
  - egresses
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - crd.antrea.io
  resources:
  - egresses/status
  verbs:
  - update
- apiGroups:
  - crd.antrea.io
  resources:
  - externalippools
  - ippools
  - trafficcontrols
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - crd.antrea.io
  resources:
  - ippools/status
  verbs:
  - update
- apiGroups:
  - k8s.cni.cncf.io
  resources:
  - network-attachment-definitions
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - certificates.k8s.io
  resources:
  - certificatesigningrequests
  verbs:
  - get
  - watch
  - list
  - create
- apiGroups:
  - multicluster.crd.antrea.io
  resources:
  - gateways
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - multicluster.crd.antrea.io
  resources:
  - clusterinfoimports
  - labelidentities
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
  name: antrea-cluster-identity-reader
rules:
- apiGroups:
  - ""
  resourceNames:
  - antrea-cluster-identity
  resources:
  - configmaps
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: antrea
  name: antrea-controller
rules:
- apiGroups:
  - ""
  resources:
  - pods
  - services
  - namespaces
  - configmaps
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - ""
  resources:
  - nodes
  verbs:
  - get
  - watch
  - list
  - patch
- apiGroups:
  - ""
  resources:
  - services/status
  verbs:
  - update
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - authentication.k8s.io
  resources:
  - tokenreviews
  verbs:
  - create
- apiGroups:
  - authorization.k8s.io
  resources:
  - subjectaccessreviews
  verbs:
  - create
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resourceNames:
  - extension-apiserver-authentication
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resourceNames:
  - antrea-ca
  - antrea-ipsec-ca
  - antrea-cluster-identity
  resources:
  - configmaps
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resourceNames:
  - antrea-ipsec-ca
  resources:
  - secrets
  verbs:
  - get
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps
  - secrets
  verbs:
  - create
- apiGroups:
  - apiregistration.k8s.io
  resourceNames:
  - v1alpha1.stats.antrea.io
  - v1beta1.system.antrea.io
  - v1beta2.controlplane.antrea.io
  resources:
  - apiservices
  verbs:
  - get
  - update
- apiGroups:
  - apiregistration.k8s.io
  resourceNames:
  - v1beta1.networking.antrea.tanzu.vmware.com
  - v1beta1.controlplane.antrea.tanzu.vmware.com
  - v1alpha1.stats.antrea.tanzu.vmware.com
  - v1beta1.system.antrea.tanzu.vmware.com
  - v1beta2.controlplane.antrea.tanzu.vmware.com
  resources:
  - apiservices
  verbs:
  - delete
- apiGroups:
  - admissionregistration.k8s.io
  resourceNames:
  - labelsmutator.antrea.io
  - crdmutator.antrea.io
  - crdvalidator.antrea.io
  resources:
  - mutatingwebhookconfigurations
  - validatingwebhookconfigurations
  verbs:
  - get
  - update
- apiGroups:
  - certificates.k8s.io
  resources:
  - certificatesigningrequests
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - certificates.k8s.io
  resources:
  - certificatesigningrequests/approval
  - certificatesigningrequests/status
  verbs:
  - update
- apiGroups:
  - certificates.k8s.io
  resourceNames:
  - antrea.io/antrea-agent-ipsec-tunnel
  resources:
  - signers
  verbs:
  - approve
  - sign
- apiGroups:
  - crd.antrea.io
  resources:
  - antreacontrollerinfos
  verbs:
  - get
  - create
  - update
  - delete
- apiGroups:
  - crd.antrea.io
  resources:
  - antreaagentinfos
  verbs:
  - list
  - create
  - delete
- apiGroups:
  - crd.antrea.io
  resources:
  - clusternetworkpolicies
  - networkpolicies
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - crd.antrea.io
  resources:
  - clusternetworkpolicies/status
  - networkpolicies/status
  verbs:
  - update
- apiGroups:
  - crd.antrea.io
  resources:
  - tiers
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - crd.antrea.io
  resources:
  - traceflows
  - traceflows/status
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - crd.antrea.io
  resources:
  - externalentities
  - clustergroups
  - groups
  verbs:
  - get
  - watch
  - list
  - update
  - patch
  - create
  - delete
- apiGroups:
  - crd.antrea.io
  resources:
  - clustergroups/status
  - groups/status
  verbs:
  - update
- apiGroups:
  - crd.antrea.io
  resources:
  - egresses
  verbs:
  - get
  - watch
  - list
  - update
  - patch
- apiGroups:
  - crd.antrea.io
  resources:
  - externalippools
  - ippools
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - crd.antrea.io
  resources:
  - externalippools/status
  - ippools/status
  verbs:
  - update
  - patch
- apiGroups:
  - crd.antrea.io
  resources:
  - externalnodes
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - apps
  resources:
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - crd.antrea.io
  resources:
  - supportbundlecollections
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - crd.antrea.io
  resources:
  - supportbundlecollections/status
  verbs:
  - update
- apiGroups:
  - multicluster.crd.antrea.io
  resources:
  - labelidentities
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: antrea
  name: antctl
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: antctl
subjects:
- kind: ServiceAccount
  name: antctl
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: antrea
  name: antrea-agent
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: antrea-agent
subjects:
- kind: ServiceAccount
  name: antrea-agent
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: antrea
  name: antrea-controller
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: antrea-controller
subjects:
- kind: ServiceAccount
  name: antrea-controller
  namespace: kube-system
---
apiVersion: v1
data:
  antrea-agent.conf: |
    {{.AntreaAgentConfig | indent 4}}
  antrea-cni.conflist: |
    {{.AntreaCNIConfig | indent 4}}
  antrea-controller.conf: |
    {{.AntreaControllerConfig | indent 4}}
kind: ConfigMap
metadata:
  labels:
    app: antrea
  name: antrea-config
  namespace: kube-system
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    kubernetes.io/service-account.name: antctl
  name: antctl-service-account-token
  namespace: kube-system
type: kubernetes.io/service-account-token
---
apiVersion: v1
kind: Secret
metadata:
  annotations:
    kubernetes.io/service-account.name: antrea-agent
  name: antrea-agent-service-account-token
  namespace: kube-system
type: kubernetes.io/service-account-token
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: antrea
  name: antrea
  namespace: kube-system
spec:
  ports:
  - port: 443
    protocol: TCP
    targetPort: api
  selector:
    app: antrea
    component: antrea-controller
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    release.openshift.io/version: "{{.ReleaseVersion}}"
  labels:
    app: antrea
    component: antrea-controller
  name: antrea-controller
  namespace: kube-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app: antrea
      component: antrea-controller
  strategy:
    type: Recreate
  template:
    metadata:
      annotations:
        checksum/config: 2c1c5158b6a3ea32eff58bc1e498592e80ebecee07f51b10c722b67afce7b964
      labels:
        app: antrea
        component: antrea-controller
    spec:
      containers:
      - args:
        - --config=/etc/antrea/antrea-controller.conf
        - --logtostderr=false
        - --log_dir=/var/log/antrea
        - --alsologtostderr
        - --log_file_max_size=100
        - --log_file_max_num=4
        command:
        - antrea-controller
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        - name: SERVICEACCOUNT_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.serviceAccountName
        - name: ANTREA_CONFIG_MAP_NAME
          value: antrea-config
        image: {{.AntreaImage}}
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 5
          httpGet:
            host: localhost
            path: /livez
            port: api
            scheme: HTTPS
          periodSeconds: 10
          timeoutSeconds: 5
        name: antrea-controller
        ports:
        - containerPort: 10349
          name: api
          protocol: TCP
        readinessProbe:
          failureThreshold: 5
          httpGet:
            host: localhost
            path: /readyz
            port: api
            scheme: HTTPS
          initialDelaySeconds: 5
          periodSeconds: 10
          timeoutSeconds: 5
        resources:
          requests:
            cpu: 200m
        volumeMounts:
        - mountPath: /etc/antrea/antrea-controller.conf
          name: antrea-config
          readOnly: true
          subPath: antrea-controller.conf
        - mountPath: /var/run/antrea/antrea-controller-tls
          name: antrea-controller-tls
        - mountPath: /var/log/antrea
          name: host-var-log-antrea
      hostNetwork: true
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-cluster-critical
      serviceAccountName: antrea-controller
      tolerations:
      - key: CriticalAddonsOnly
        operator: Exists
      - effect: NoSchedule
        key: node-role.kubernetes.io/master
      - effect: NoSchedule
        key: node-role.kubernetes.io/control-plane
      volumes:
      - configMap:
          name: antrea-config
        name: antrea-config
      - name: antrea-controller-tls
        secret:
          defaultMode: 256
          optional: true
          secretName: antrea-controller-tls
      - hostPath:
          path: /var/log/antrea
          type: DirectoryOrCreate
        name: host-var-log-antrea
---
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  labels:
    app: antrea
  name: v1alpha1.stats.antrea.io
spec:
  group: stats.antrea.io
  groupPriorityMinimum: 100
  service:
    name: antrea
    namespace: kube-system
  version: v1alpha1
  versionPriority: 100
---
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  labels:
    app: antrea
  name: v1beta1.system.antrea.io
spec:
  group: system.antrea.io
  groupPriorityMinimum: 100
  service:
    name: antrea
    namespace: kube-system
  version: v1beta1
  versionPriority: 100
---
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  labels:
    app: antrea
  name: v1beta2.controlplane.antrea.io
spec:
  group: controlplane.antrea.io
  groupPriorityMinimum: 100
  service:
    name: antrea
    namespace: kube-system
  version: v1beta2
  versionPriority: 100
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  annotations:
    release.openshift.io/version: "{{.ReleaseVersion}}"
  labels:
    app: antrea
    component: antrea-agent
  name: antrea-agent
  namespace: kube-system
spec:
  selector:
    matchLabels:
      app: antrea
      component: antrea-agent
  template:
    metadata:
      annotations:
        checksum/config: 2c1c5158b6a3ea32eff58bc1e498592e80ebecee07f51b10c722b67afce7b964
        kubectl.kubernetes.io/default-container: antrea-agent
      labels:
        app: antrea
        component: antrea-agent
    spec:
      containers:
      - args:
        - --config=/etc/antrea/antrea-agent.conf
        - --logtostderr=false
        - --log_dir=/var/log/antrea
        - --alsologtostderr
        - --log_file_max_size=100
        - --log_file_max_num=4
        command:
        - antrea-agent
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        image: {{.AntreaImage}}
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 5
          httpGet:
            host: localhost
            path: /livez
            port: api
            scheme: HTTPS
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 5
        name: antrea-agent
        ports:
        - containerPort: 10350
          name: api
          protocol: TCP
        readinessProbe:
          failureThreshold: 8
          httpGet:
            host: localhost
            path: /readyz
            port: api
            scheme: HTTPS
          initialDelaySeconds: 5
          periodSeconds: 10
          timeoutSeconds: 5
        resources:
          requests:
            cpu: 200m
        securityContext:
          privileged: true
        volumeMounts:
        - mountPath: /etc/antrea/antrea-agent.conf
          name: antrea-config
          readOnly: true
          subPath: antrea-agent.conf
        - mountPath: /var/run/antrea
          name: host-var-run-antrea
        - mountPath: /var/run/openvswitch
          name: host-var-run-antrea
          subPath: openvswitch
        - mountPath: /var/lib/cni
          name: host-var-run-antrea
          subPath: cni
        - mountPath: /var/log/antrea
          name: host-var-log-antrea
        - mountPath: /host/proc
          name: host-proc
          readOnly: true
        - mountPath: /host/var/run/netns
          mountPropagation: HostToContainer
          name: host-var-run-netns
          readOnly: true
        - mountPath: /run/xtables.lock
          name: xtables-lock
      - args:
        - --log_file_max_size=100
        - --log_file_max_num=4
        command:
        - start_ovs
        image: {{.AntreaImage}}
        imagePullPolicy: IfNotPresent
        livenessProbe:
          exec:
            command:
            - /bin/sh
            - -c
            - timeout 10 container_liveness_probe ovs
          failureThreshold: 5
          initialDelaySeconds: 5
          periodSeconds: 10
          timeoutSeconds: 10
        name: antrea-ovs
        resources:
          requests:
            cpu: 200m
        securityContext:
          capabilities:
            add:
            - SYS_NICE
            - NET_ADMIN
            - SYS_ADMIN
            - IPC_LOCK
        volumeMounts:
        - mountPath: /var/run/openvswitch
          name: host-var-run-antrea
          subPath: openvswitch
        - mountPath: /var/log/openvswitch
          name: host-var-log-antrea
          subPath: openvswitch
      hostNetwork: true
      initContainers:
      - command:
        - install_cni
        env:
        - name: SKIP_CNI_BINARIES
          value: ""
        image: {{.AntreaImage}}
        imagePullPolicy: IfNotPresent
        name: install-cni
        resources:
          requests:
            cpu: 100m
        securityContext:
          capabilities:
            add:
            - SYS_MODULE
        volumeMounts:
        - mountPath: /etc/antrea/antrea-cni.conflist
          name: antrea-config
          readOnly: true
          subPath: antrea-cni.conflist
        - mountPath: /host/etc/cni/net.d
          name: host-cni-conf
        - mountPath: /host/opt/cni/bin
          name: host-cni-bin
        - mountPath: /lib/modules
          name: host-lib-modules
          readOnly: true
        - mountPath: /var/run/antrea
          name: host-var-run-antrea
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-node-critical
      serviceAccountName: antrea-agent
      tolerations:
      - key: CriticalAddonsOnly
        operator: Exists
      - effect: NoSchedule
        operator: Exists
      - effect: NoExecute
        operator: Exists
      volumes:
      - hostPath:
          path: {{.CNIBinDir}}
        name: host-cni-bin
      - hostPath:
          path: {{.CNIConfDir}}
        name: host-cni-conf
      - configMap:
          name: antrea-config
        name: antrea-config
      - hostPath:
          path: /proc
        name: host-proc
      - hostPath:
          path: /var/run/netns
        name: host-var-run-netns
      - hostPath:
          path: /var/run/antrea
          type: DirectoryOrCreate
        name: host-var-run-antrea
      - hostPath:
          path: /var/log/antrea
          type: DirectoryOrCreate
        name: host-var-log-antrea
      - hostPath:
          path: /lib/modules
        name: host-lib-modules
      - hostPath:
          path: /run/xtables.lock
          type: FileOrCreate
        name: xtables-lock
  updateStrategy:
    type: RollingUpdate
---
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  labels:
    app: antrea
  name: crdmutator.antrea.io
webhooks:
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /mutate/acnp
  name: acnpmutator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - clusternetworkpolicies
    scope: Cluster
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /mutate/anp
  name: anpmutator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - networkpolicies
    scope: Namespaced
  sideEffects: None
  timeoutSeconds: 5
---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  labels:
    app: antrea
  name: crdvalidator.antrea.io
webhooks:
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/tier
  name: tiervalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    - DELETE
    resources:
    - tiers
    scope: Cluster
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/acnp
  name: acnpvalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - clusternetworkpolicies
    scope: Cluster
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/anp
  name: anpvalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha1
    operations:
    - CREATE
    - UPDATE
    resources:
    - networkpolicies
    scope: Namespaced
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/clustergroup
  name: clustergroupvalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha3
    - v1alpha2
    operations:
    - CREATE
    - UPDATE
    resources:
    - clustergroups
    scope: Cluster
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/group
  name: groupvalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha3
    operations:
    - CREATE
    - UPDATE
    resources:
    - groups
    scope: Namespaced
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/externalippool
  name: externalippoolvalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha2
    operations:
    - UPDATE
    resources:
    - externalippools
    scope: Cluster
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/egress
  name: egressvalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha2
    operations:
    - CREATE
    - UPDATE
    resources:
    - egresses
    scope: Cluster
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/ippool
  name: ippoolvalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha2
    operations:
    - CREATE
    - UPDATE
    - DELETE
    resources:
    - ippools
    scope: Cluster
  sideEffects: None
  timeoutSeconds: 5
- admissionReviewVersions:
  - v1
  - v1beta1
  clientConfig:
    service:
      name: antrea
      namespace: kube-system
      path: /validate/supportbundlecollection
  name: supportbundlecollectionvalidator.antrea.io
  rules:
  - apiGroups:
    - crd.antrea.io
    apiVersions:
    - v1alpha1
    operations:
    - UPDATE
    - DELETE
    resources:
    - supportbundlecollections
    scope: Cluster
  sideEffects: None
  timeoutSeconds: 5
